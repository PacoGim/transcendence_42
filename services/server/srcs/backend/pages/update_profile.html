<head>
	<title>Update Profile</title>
	<meta name="description" content="PongPong Update Profile Page" module />
	<style module>
		form {
			display: grid;
			row-gap: 1rem;
		}

		update-field {
			display: grid;
			grid-template-columns: 120px 1fr auto;
			grid-template-rows: auto auto;
			column-gap: 0.7rem;
			align-items: center;
			margin-bottom: 1rem;
		}

		update-field.label {
			grid-column: 1;
			grid-row: 1;
			align-self: center;
		}

		.field-input {
			grid-column: 2;
			grid-row: 1;
			padding: 0.25rem 0.5rem;
			background-color: rgba(0, 0, 0, 0.75);
			border-bottom: 2px transparent dashed;
		}

		.avatar-label {
			grid-column: 2;
			grid-row: 1;
			background-color: rgba(0, 0, 0, 0.75);
			cursor: pointer;
		}

		#avatarPreview {
			width: 70px;
			height: 70px;
			border-radius: 10%;
			cursor: pointer;
			margin: 0 auto;
		}

		#resetAvatarButton {
			grid-column: 3;
			grid-row: 1;
			width: max-content;
			justify-self: start;
		}

		validate-btn {
			grid-column: 4;
			grid-row: 1;
			justify-self: start;
			width: 70px;
		}

		input:focus {
			outline: none;
			border-bottom: 2px white dashed;
		}

		modal input {
			padding: 0.25rem 0.5rem;
			background-color: rgba(0, 0, 0, 0.75);
			border-bottom: 2px transparent dashed;
		}

		.hidden {
			display: none;
		}

		#twofa-modal-overlay {
			position: fixed;
			inset: 0;
			background: rgba(0, 0, 0, 0.5);
		}

		#twofa-modal {
			position: fixed;
			top: 50%;
			width: 320px;
			transform: translate(-50%, -50%);
			background: rgb(59, 39, 82);
			padding: 20px;
			border-radius: 6px;
		}

		.actions {
			display: flex;
			justify-content: space-between;
			margin-top: 10px;
		}

		@media (max-width: 700px) {
			update-field {
				grid-template-columns: 1fr;
				grid-template-rows: auto auto auto auto;
			}

			update-field.label {
				grid-column: 1;
				grid-row: 1;
				text-align: left;
			}

			update-field span {
				text-align: center;
			}

			.field-input,
			.avatar-label {
				grid-column: 1;
				grid-row: 2;
				justify-self: center;
			}

			#resetAvatarButton {
				grid-column: 1;
				grid-row: 3;
				justify-self: center;
			}

			validate-btn {
				grid-column: 1;
				grid-row: 4;
				justify-self: center;
			}
		}
	</style>
</head>

<page type="update_profile">
	<page-title>Update Profile</page-title>

	<form>
		<update-field>
			<span>Username:</span>
			<input id="usernameInput" class="field-input" type="text" name="username" autocomplete="username"
				tabindex="1" />
			<validate-btn id="usernameValidateBtn" class="hidden" tabindex="2">
				<img class="button text-xl" src="/images/validate.svg" alt="Validate username" />
			</validate-btn>
		</update-field>

		<update-field>
			<span>Avatar:</span>
			<label for="avatarInput" class="avatar-label" tabindex="3">
				<img id="avatarPreview" src="/images/avatars/baseAvatar.jpg" />
			</label>
			<button type="button" id="resetAvatarButton" class="button text-2xl" tabindex="4">Reset</button>
			<input id="avatarInput" type="file" accept="image/*" name="avatar" class="hidden" />
			<validate-btn id="avatarValidateBtn" class="hidden" tabindex="5">
				<img class="button text-xl" src="/images/validate.svg" alt="Validate avatar" />
			</validate-btn>
		</update-field>

		<update-field>
			<span>Two-Factor Authentication:</span>
			<button id="toggle-2fa-btn" class="field-input button text-2xl" tabindex="6">Disable</button>
		</update-field>
	</form>

	<nav-button tabindex="7" data-route="">Back</nav-button>

	<modal>
		<div id="twofa-modal-overlay" class="hidden"></div>
		<div id="twofa-modal" class="hidden">
			<h2>Two-Factor Authentication</h2>
			<p>
				The Two-Factor Authentication is done by email.
				Please enter the 6-digit code sent to your email address to proceed.
			</p>
			<input id="twofa-code-input" class="" type="text" placeholder="6 number code" maxlength="6"
				inputmode="numeric" />
			<div class="actions">
				<button id="twofa-validate-btn" class="button text-2xl">Validate</button>
				<button id="twofa-resend-btn" class="button text-2xl">Resend Code</button>
			</div>
			<button id="twofa-modal-close">Close</button>
		</div>
	</modal>
</page>

<script type="module" src="modules/update_profile.js"></script>
